openapi: 3.0.0
info:
  title: Influ AI Content Management API
  description: API documentation for managing content on Influ AI, including content generation, fetching, updates, and downloads.
  version: "1.0"

paths:
  /content:
    get:
      summary: Fetch User Content (Generations)
      description: Retrieve a paginated list of generated content by the user.
      parameters:
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 10
            description: The maximum number of items to return per page.
        - name: offset
          in: query
          required: false
          schema:
            type: integer
            default: 0
            description: The starting point for the list of items.
      responses:
        '200':
          description: A list of content items with pagination metadata.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/ContentDetails'
                  pagination:
                    type: object
                    properties:
                      total_items:
                        type: integer
                        example: 120
                      limit:
                        type: integer
                        example: 10
                      offset:
                        type: integer
                        example: 20
                      has_more:
                        type: boolean
                        example: true
      security:
        - bearerAuth: []

  /content/{id}:
    get:
      summary: Get Content Details
      description: Retrieve detailed information for a specific piece of generated content.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            description: The unique identifier of the content
      responses:
        '200':
          description: Detailed content information.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContentDetails'

  /content/generate:
    post:
      summary: Generate New Content
      description: Create a new piece of content based on selected options, such as "Smart Script," "Custom Script," or "Video."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                content_type:
                  type: string
                  enum: ["smart_script", "custom_script", "video"]
                user_input:
                  type: string
                  description: "Details provided by the user for custom requests"
      responses:
        '202':
          description: Content generation initiated successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "submitted"
                  content_id:
                    type: string
                    example: "generated_content_id"
                  message:
                    type: string
                    example: "Content generation started"
        '429':
          description: Rate limit exceeded.
      security:
        - bearerAuth: []

  /content/{id}/regenerate:
    post:
      summary: Regenerate Content
      description: Initiates a regeneration process for the specified content. This is a non-idempotent operation and may produce a new result with each request.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            description: The unique identifier of the content
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                user_input:
                  type: string
                  description: "Prompt or new caption"
      responses:
        '202':
          description: Content regeneration started successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "submitted"
                  message:
                    type: string
                    example: "Content regeneration started"
        '429':
          description: Rate limit exceeded.
      security:
        - bearerAuth: []

  /content/{id}/feedback:
    post:
      summary: Content Feedback (Thumbs Up/Down)
      description: Allows users to provide feedback on generated content, such as a thumbs-up or thumbs-down.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            description: The unique identifier of the content
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                feedback:
                  type: string
                  enum: ["LIKE", "DISLIKE"]
      responses:
        '200':
          description: Feedback submitted successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "success"
                  message:
                    type: string
                    example: "Feedback submitted"
      security:
        - bearerAuth: []

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    ContentDetails:
      type: object
      properties:
        id:
          type: string
          example: "content_id"
        type:
          type: string
          enum: ["smart_script", "custom_script", "video"]
          example: "video"
        created_at:
          type: string
          format: date
          example: "2024-04-05"
        status:
          type: string
          enum: ["submitted", "in_progress", "available"]
          example: "available"
        title:
          type: string
          example: "Content title"
        text:
          type: string
          example: "Description of the content"
        media:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                example: "example_video_1"
              thumbnail_url:
                type: string
                example: "https://link-to-thumbnail.jpg"
              download_url:
                type: string
                example: "https://link-to-video-download.mp4"
